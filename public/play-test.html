<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wordie Budie - French Learning Game (Test)</title>
    <link rel="stylesheet" href="styles.css" id="main-css">
    <meta name="description" content="Interactive French language learning game">

    <style>
        /* Override for iframe embedding */
        body {
            margin: 0;
            padding: 10px;
            font-family: 'Arial', sans-serif;
        }
        .container {
            max-width: 100%;
            padding: 10px;
        }
        header {
            margin-bottom: 20px;
        }
        .game-area {
            min-height: 500px;
        }

        .word-bank {
            background: #f8f9fa;
            border: 2px dashed #667eea;
            border-radius: 12px;
            padding: 20px;
            margin: 15px 0;
            min-height: 80px;
            text-align: center;
        }

        .word-bank:empty::before {
            content: "French words will appear here...";
            color: #999;
            font-style: italic;
        }

        .answer-area {
            background: #e8f5e8;
            border: 2px solid #51cf66;
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            min-height: 50px;
        }

        .answer-area:empty::before {
            content: "Your French sentence will appear here...";
            color: #999;
            font-style: italic;
        }
    </style>
</head>
<body>
    <div class="container">
        <header role="banner">
            <h1>🎯 Wordie Budie</h1>
            <p style="margin: 5px 0; color: #666; font-size: 14px;">French Learning Game</p>
            <div class="level-selector">
                <label for="level">Choose Level:</label>
                <select id="level" aria-label="Select French proficiency level">
                    <option value="A1">A1 - Beginner</option>
                    <option value="A2">A2 - Elementary</option>
                    <option value="RANDOM_A1">🎲 Random A1 Topics</option>
                    <option value="RANDOM_A2">🎲 Random A2 Topics</option>
                    <option value="RANDOM_ALL">🎲 Random All Topics</option>
                </select>
            </div>
            <div class="topic-selector">
                <label for="topic">Choose Topic:</label>
                <select id="topic" aria-label="Select learning topic">
                    <option value="">Choose a topic...</option>
                    <!-- A1 Topics -->
                    <option value="basic">A1: Basic Sentences (10 questions)</option>
                    <option value="colors">A1: Colors (7 questions)</option>
                    <option value="family">A1: Family (6 questions)</option>
                    <option value="numbers">A1: Numbers (5 questions)</option>
                    <!-- A2 Topics -->
                    <option value="food">A2: Food & Dining (5 questions)</option>
                    <option value="daily-routine">A2: Daily Routine (5 questions)</option>
                </select>
            </div>
            <div class="timer-settings">
                <label for="timer-duration">Timer:</label>
                <select id="timer-duration" aria-label="Select timer duration">
                    <option value="0">Off</option>
                    <option value="10">10 seconds</option>
                    <option value="20">20 seconds</option>
                    <option value="30">30 seconds</option>
                </select>
            </div>
        </header>

        <main role="main">
            <div class="game-area" role="application" aria-label="French learning game">
                <div class="score-board" role="status" aria-live="polite" aria-label="Game statistics">
                    <div class="score">Score: <span id="score">0</span></div>
                    <div class="streak">Streak: <span id="streak">0</span></div>
                    <div class="progress">Progress: <span id="progress">0/0</span></div>
                </div>

                <div class="question-section">
                    <div class="english-sentence">
                        <h2 id="english-text" aria-live="polite" role="status">Select a topic to start!</h2>
                    </div>

                    <div class="french-construction">
                        <div id="answer-area" class="answer-area" role="region" aria-label="Selected French words" aria-live="polite">
                            <!-- Selected words will appear here -->
                        </div>
                    </div>

                    <div class="word-options">
                        <div id="word-bank" class="word-bank" role="group" aria-label="Available French words">
                            <!-- Word options will appear here -->
                        </div>
                    </div>

                    <div class="game-controls" role="toolbar" aria-label="Game controls">
                        <button id="clear-btn" class="btn btn-secondary">Clear</button>
                        <button id="check-btn" class="btn btn-primary">Check Answer</button>
                        <button id="hint-btn" class="btn btn-hint">Hint</button>
                        <button id="replay-btn" class="btn btn-audio">🔊 Replay</button>
                        <button id="next-btn" class="btn btn-success" style="display: none;">Next Question</button>
                    </div>

                    <div id="feedback" class="feedback" role="status" aria-live="assertive"></div>
                    <div id="explanation" class="explanation" role="region" aria-label="Grammar explanation"></div>
                </div>
            </div>

            <div class="stats-panel" role="complementary" aria-label="Session statistics">
                <h3>Session Stats</h3>
                <div class="stat-item">
                    <span>Correct:</span>
                    <span id="correct-count">0</span>
                </div>
                <div class="stat-item">
                    <span>Total:</span>
                    <span id="total-count">0</span>
                </div>
                <div class="stat-item">
                    <span>Accuracy:</span>
                    <span id="accuracy">0%</span>
                </div>
            </div>
        </main>
    </div>

    <!-- Embedded Sample Data (so it always works) -->
    <script>
        // Comprehensive French sentences data embedded directly
        const SAMPLE_DATA = {
            "A1": {
                "basic": [
                    { "id": "a1_basic_001", "english": "I am happy.", "correctFrench": ["Je", "suis", "heureux"], "wordOptions": ["Je", "suis", "heureux", "triste", "tu", "il"], "explanation": "Je suis (I am) + adjective. 'Heureux' means happy." },
                    { "id": "a1_basic_002", "english": "You are tall.", "correctFrench": ["Tu", "es", "grand"], "wordOptions": ["Tu", "es", "grand", "petit", "je", "suis"], "explanation": "Tu es (You are) + adjective. 'Grand' means tall." },
                    { "id": "a1_basic_003", "english": "She is nice.", "correctFrench": ["Elle", "est", "gentille"], "wordOptions": ["Elle", "est", "gentille", "méchante", "il", "sont"], "explanation": "Elle est (She is) + feminine adjective. 'Gentille' is the feminine form of nice." },
                    { "id": "a1_basic_004", "english": "We are French.", "correctFrench": ["Nous", "sommes", "français"], "wordOptions": ["Nous", "sommes", "français", "anglais", "vous", "êtes"], "explanation": "Nous sommes (We are) + nationality. 'Français' means French." },
                    { "id": "a1_basic_005", "english": "They have a car.", "correctFrench": ["Ils", "ont", "une", "voiture"], "wordOptions": ["Ils", "ont", "une", "voiture", "maison", "chat", "le"], "explanation": "Ils ont (They have) + article + noun. 'Une voiture' means a car." },
                    { "id": "a1_basic_006", "english": "I have a dog.", "correctFrench": ["J'ai", "un", "chien"], "wordOptions": ["J'ai", "un", "chien", "chat", "une", "la"], "explanation": "J'ai (I have) + un chien (a dog - masculine)." },
                    { "id": "a1_basic_007", "english": "He is my friend.", "correctFrench": ["Il", "est", "mon", "ami"], "wordOptions": ["Il", "est", "mon", "ami", "ma", "amie", "le"], "explanation": "Il est (He is) + mon ami (my friend - masculine)." },
                    { "id": "a1_basic_008", "english": "The book is interesting.", "correctFrench": ["Le", "livre", "est", "intéressant"], "wordOptions": ["Le", "livre", "est", "intéressant", "La", "ennuyeux", "sont"], "explanation": "Le livre (The book - masculine) est intéressant (is interesting)." },
                    { "id": "a1_basic_009", "english": "We are students.", "correctFrench": ["Nous", "sommes", "étudiants"], "wordOptions": ["Nous", "sommes", "étudiants", "professeurs", "vous", "êtes"], "explanation": "Nous sommes étudiants (We are students)." },
                    { "id": "a1_basic_010", "english": "You are kind.", "correctFrench": ["Vous", "êtes", "gentil"], "wordOptions": ["Vous", "êtes", "gentil", "méchant", "nous", "sommes"], "explanation": "Vous êtes (You are - formal) + gentil (kind)." }
                ],
                "colors": [
                    { "id": "a1_colors_001", "english": "The car is red.", "correctFrench": ["La", "voiture", "est", "rouge"], "wordOptions": ["La", "voiture", "est", "rouge", "bleu", "verte", "Le"], "explanation": "La voiture (The car - feminine) est rouge (is red)." },
                    { "id": "a1_colors_002", "english": "I like blue.", "correctFrench": ["J'aime", "le", "bleu"], "wordOptions": ["J'aime", "le", "bleu", "rouge", "vert", "la", "jaune"], "explanation": "J'aime (I like) + le bleu (the blue/blue color)." },
                    { "id": "a1_colors_003", "english": "The house is white.", "correctFrench": ["La", "maison", "est", "blanche"], "wordOptions": ["La", "maison", "est", "blanche", "noire", "rouge", "Le"], "explanation": "La maison (The house - feminine) est blanche (is white - feminine form)." },
                    { "id": "a1_colors_004", "english": "My cat is black.", "correctFrench": ["Mon", "chat", "est", "noir"], "wordOptions": ["Mon", "chat", "est", "noir", "Ma", "blanc", "chien"], "explanation": "Mon chat (My cat - masculine) est noir (is black)." },
                    { "id": "a1_colors_005", "english": "The flowers are yellow.", "correctFrench": ["Les", "fleurs", "sont", "jaunes"], "wordOptions": ["Les", "fleurs", "sont", "jaunes", "Le", "rouge", "est"], "explanation": "Les fleurs (The flowers - plural) sont jaunes (are yellow - plural)." },
                    { "id": "a1_colors_006", "english": "I wear a green shirt.", "correctFrench": ["Je", "porte", "une", "chemise", "verte"], "wordOptions": ["Je", "porte", "une", "chemise", "verte", "rouge", "un", "pantalon"], "explanation": "Je porte (I wear) + une chemise verte (a green shirt - feminine)." },
                    { "id": "a1_colors_007", "english": "The sky is blue.", "correctFrench": ["Le", "ciel", "est", "bleu"], "wordOptions": ["Le", "ciel", "est", "bleu", "La", "rouge", "sont"], "explanation": "Le ciel (The sky - masculine) est bleu (is blue)." }
                ],
                "family": [
                    { "id": "a1_family_001", "english": "This is my mother.", "correctFrench": ["C'est", "ma", "mère"], "wordOptions": ["C'est", "ma", "mère", "mon", "père", "Ce"], "explanation": "C'est (This is) + ma mère (my mother - feminine)." },
                    { "id": "a1_family_002", "english": "My father works.", "correctFrench": ["Mon", "père", "travaille"], "wordOptions": ["Mon", "père", "travaille", "Ma", "mère", "étudie"], "explanation": "Mon père (My father) travaille (works)." },
                    { "id": "a1_family_003", "english": "I have two sisters.", "correctFrench": ["J'ai", "deux", "sœurs"], "wordOptions": ["J'ai", "deux", "sœurs", "frères", "une", "trois"], "explanation": "J'ai deux sœurs (I have two sisters)." },
                    { "id": "a1_family_004", "english": "My brother is young.", "correctFrench": ["Mon", "frère", "est", "jeune"], "wordOptions": ["Mon", "frère", "est", "jeune", "Ma", "sœur", "vieux"], "explanation": "Mon frère (My brother) est jeune (is young)." },
                    { "id": "a1_family_005", "english": "We love our family.", "correctFrench": ["Nous", "aimons", "notre", "famille"], "wordOptions": ["Nous", "aimons", "notre", "famille", "vos", "leurs", "détestons"], "explanation": "Nous aimons (We love) notre famille (our family)." },
                    { "id": "a1_family_006", "english": "My grandmother is old.", "correctFrench": ["Ma", "grand-mère", "est", "âgée"], "wordOptions": ["Ma", "grand-mère", "est", "âgée", "Mon", "grand-père", "jeune"], "explanation": "Ma grand-mère (My grandmother) est âgée (is old - feminine)." }
                ],
                "numbers": [
                    { "id": "a1_numbers_001", "english": "I have one apple.", "correctFrench": ["J'ai", "une", "pomme"], "wordOptions": ["J'ai", "une", "pomme", "un", "deux", "trois"], "explanation": "J'ai une pomme (I have one apple - feminine)." },
                    { "id": "a1_numbers_002", "english": "There are three cats.", "correctFrench": ["Il", "y", "a", "trois", "chats"], "wordOptions": ["Il", "y", "a", "trois", "chats", "deux", "quatre", "chien"], "explanation": "Il y a (There are) trois chats (three cats)." },
                    { "id": "a1_numbers_003", "english": "I am twenty years old.", "correctFrench": ["J'ai", "vingt", "ans"], "wordOptions": ["J'ai", "vingt", "ans", "trente", "quarante", "suis"], "explanation": "J'ai vingt ans (I am twenty years old - literally 'I have twenty years')." },
                    { "id": "a1_numbers_004", "english": "We have five books.", "correctFrench": ["Nous", "avons", "cinq", "livres"], "wordOptions": ["Nous", "avons", "cinq", "livres", "quatre", "six", "livre"], "explanation": "Nous avons cinq livres (We have five books)." },
                    { "id": "a1_numbers_005", "english": "The class has ten students.", "correctFrench": ["La", "classe", "a", "dix", "étudiants"], "wordOptions": ["La", "classe", "a", "dix", "étudiants", "Le", "neuf", "professeurs"], "explanation": "La classe a dix étudiants (The class has ten students)." }
                ]
            },
            "A2": {
                "food": [
                    { "id": "a2_food_001", "english": "I eat breakfast every morning.", "correctFrench": ["Je", "prends", "le", "petit-déjeuner", "chaque", "matin"], "wordOptions": ["Je", "prends", "le", "petit-déjeuner", "chaque", "matin", "mange", "soir", "déjeuner"], "explanation": "Je prends le petit-déjeuner (I have breakfast) chaque matin (every morning)." },
                    { "id": "a2_food_002", "english": "She cooks dinner for her family.", "correctFrench": ["Elle", "cuisine", "le", "dîner", "pour", "sa", "famille"], "wordOptions": ["Elle", "cuisine", "le", "dîner", "pour", "sa", "famille", "mange", "son", "petit-déjeuner"], "explanation": "Elle cuisine (She cooks) le dîner (dinner) pour sa famille (for her family)." },
                    { "id": "a2_food_003", "english": "We go to the restaurant.", "correctFrench": ["Nous", "allons", "au", "restaurant"], "wordOptions": ["Nous", "allons", "au", "restaurant", "venons", "du", "magasin"], "explanation": "Nous allons au restaurant (We go to the restaurant). 'Au' = à + le." },
                    { "id": "a2_food_004", "english": "I would like some bread.", "correctFrench": ["Je", "voudrais", "du", "pain"], "wordOptions": ["Je", "voudrais", "du", "pain", "veux", "de", "la", "eau"], "explanation": "Je voudrais (I would like) du pain (some bread). 'Du' = de + le (partitive article)." },
                    { "id": "a2_food_005", "english": "The cake is delicious.", "correctFrench": ["Le", "gâteau", "est", "délicieux"], "wordOptions": ["Le", "gâteau", "est", "délicieux", "La", "tarte", "mauvais"], "explanation": "Le gâteau (The cake) est délicieux (is delicious)." }
                ],
                "daily-routine": [
                    { "id": "a2_routine_001", "english": "I wake up at seven o'clock.", "correctFrench": ["Je", "me", "réveille", "à", "sept", "heures"], "wordOptions": ["Je", "me", "réveille", "à", "sept", "heures", "lève", "huit", "six"], "explanation": "Je me réveille (I wake up) à sept heures (at seven o'clock)." },
                    { "id": "a2_routine_002", "english": "She brushes her teeth.", "correctFrench": ["Elle", "se", "brosse", "les", "dents"], "wordOptions": ["Elle", "se", "brosse", "les", "dents", "lave", "mains", "cheveux"], "explanation": "Elle se brosse les dents (She brushes her teeth). Reflexive verb with body parts." },
                    { "id": "a2_routine_003", "english": "We take a shower in the morning.", "correctFrench": ["Nous", "prenons", "une", "douche", "le", "matin"], "wordOptions": ["Nous", "prenons", "une", "douche", "le", "matin", "bain", "soir", "nuit"], "explanation": "Nous prenons une douche (We take a shower) le matin (in the morning)." },
                    { "id": "a2_routine_004", "english": "He goes to work by car.", "correctFrench": ["Il", "va", "au", "travail", "en", "voiture"], "wordOptions": ["Il", "va", "au", "travail", "en", "voiture", "vient", "du", "métro"], "explanation": "Il va au travail (He goes to work) en voiture (by car)." },
                    { "id": "a2_routine_005", "english": "I go to bed at ten o'clock.", "correctFrench": ["Je", "me", "couche", "à", "dix", "heures"], "wordOptions": ["Je", "me", "couche", "à", "dix", "heures", "lève", "neuf", "onze"], "explanation": "Je me couche (I go to bed) à dix heures (at ten o'clock)." }
                ]
            }
        };

        // Simple Game Logic
        class SimpleGame {
            constructor() {
                this.currentSentences = [];
                this.currentIndex = 0;
                this.selectedWords = [];
                this.score = 0;
                this.streak = 0;
                this.totalCount = 0;
                this.correctCount = 0;

                this.init();
            }

            init() {
                this.populateTopics();
                this.bindEvents();
                this.loadSentences();
            }

            populateTopics() {
                const topicSelect = document.getElementById('topic');
                topicSelect.innerHTML = '<option value="">Choose a topic...</option>';

                // Count sentences for each topic
                const topicCounts = {};
                for (const [level, topics] of Object.entries(SAMPLE_DATA)) {
                    for (const [topicName, sentences] of Object.entries(topics)) {
                        topicCounts[topicName] = sentences.length;
                    }
                }

                // Add all unique topics with counts
                const allTopics = Object.keys(topicCounts).sort();
                allTopics.forEach(topic => {
                    const option = document.createElement('option');
                    option.value = topic;
                    option.textContent = `${topic} (${topicCounts[topic]} questions)`;
                    topicSelect.appendChild(option);
                });

                console.log('✅ Topics populated:', allTopics);
            }

            bindEvents() {
                document.getElementById('level').addEventListener('change', () => this.loadSentences());
                document.getElementById('topic').addEventListener('change', () => this.loadSentences());
                document.getElementById('clear-btn').addEventListener('click', () => this.clearAnswer());
                document.getElementById('check-btn').addEventListener('click', () => this.checkAnswer());
                document.getElementById('next-btn').addEventListener('click', () => this.nextQuestion());
                document.getElementById('hint-btn').addEventListener('click', () => this.showHint());
                document.getElementById('replay-btn').addEventListener('click', () => this.replayAudio());
            }

            loadSentences() {
                const level = document.getElementById('level').value;
                const topic = document.getElementById('topic').value;

                console.log(`Loading ${level} - ${topic}`);

                // Handle random modes
                if (level.startsWith('RANDOM_')) {
                    this.loadRandomSentences(level);
                    return;
                }

                if (!topic) {
                    document.getElementById('english-text').textContent = 'Please select a topic to start!';
                    document.getElementById('word-bank').innerHTML = '';
                    return;
                }

                // Find sentences in any level that matches the topic
                let foundSentences = null;
                let foundLevel = null;

                // Check all levels for the topic
                for (const [levelKey, levelData] of Object.entries(SAMPLE_DATA)) {
                    if (levelData[topic]) {
                        foundSentences = levelData[topic];
                        foundLevel = levelKey;
                        break;
                    }
                }

                if (foundSentences) {
                    this.currentSentences = foundSentences;
                    this.currentIndex = 0;
                    this.showQuestion();
                    console.log(`✅ Loaded ${this.currentSentences.length} sentences for ${foundLevel} - ${topic}`);
                } else {
                    console.log(`❌ No data found for topic: ${topic}`);
                    document.getElementById('english-text').textContent = 'Topic not found. Please select a different topic!';
                    document.getElementById('word-bank').innerHTML = '';
                }
            }

            loadRandomSentences(randomType) {
                let allSentences = [];

                if (randomType === 'RANDOM_A1') {
                    // Get all A1 sentences
                    for (const topic of Object.values(SAMPLE_DATA.A1)) {
                        allSentences = allSentences.concat(topic);
                    }
                } else if (randomType === 'RANDOM_A2') {
                    // Get all A2 sentences
                    for (const topic of Object.values(SAMPLE_DATA.A2)) {
                        allSentences = allSentences.concat(topic);
                    }
                } else if (randomType === 'RANDOM_A1_A2') {
                    // Get all sentences from all levels
                    for (const level of Object.values(SAMPLE_DATA)) {
                        for (const topic of Object.values(level)) {
                            allSentences = allSentences.concat(topic);
                        }
                    }
                }

                // Shuffle the sentences
                this.shuffleArray(allSentences);

                // Take first 20 sentences for random mode
                this.currentSentences = allSentences.slice(0, 20);
                this.currentIndex = 0;
                this.showQuestion();

                console.log(`✅ Loaded ${this.currentSentences.length} random sentences for ${randomType}`);
                document.getElementById('english-text').textContent = 'Random mode active! Mix of different topics.';

                // Small delay then show first question
                setTimeout(() => {
                    this.showQuestion();
                }, 1000);
            }

            shuffleArray(array) {
                for (let i = array.length - 1; i > 0; i--) {
                    const j = Math.floor(Math.random() * (i + 1));
                    [array[i], array[j]] = [array[j], array[i]];
                }
            }

            showQuestion() {
                if (this.currentIndex >= this.currentSentences.length) {
                    document.getElementById('english-text').textContent = 'Great job! You completed all questions!';
                    return;
                }

                const sentence = this.currentSentences[this.currentIndex];
                document.getElementById('english-text').textContent = sentence.english;

                // Clear previous words
                document.getElementById('answer-area').innerHTML = '';
                this.selectedWords = [];

                // Show word options
                this.showWordOptions(sentence.wordOptions);

                // Update progress
                document.getElementById('progress').textContent = `${this.currentIndex + 1}/${this.currentSentences.length}`;

                // Hide feedback
                document.getElementById('feedback').textContent = '';
                document.getElementById('explanation').textContent = '';
                document.getElementById('next-btn').style.display = 'none';
            }

            showWordOptions(words) {
                const wordBank = document.getElementById('word-bank');
                wordBank.innerHTML = '';

                words.forEach(word => {
                    const wordElement = document.createElement('div');
                    wordElement.className = 'word-option';
                    wordElement.textContent = word;
                    wordElement.style.cssText = `
                        display: inline-block;
                        margin: 5px;
                        padding: 10px 15px;
                        background: #667eea;
                        color: white;
                        border: 2px solid #667eea;
                        border-radius: 8px;
                        cursor: pointer;
                        transition: all 0.3s ease;
                        font-size: 16px;
                        font-weight: bold;
                        box-shadow: 0 2px 8px rgba(102, 126, 234, 0.3);
                    `;

                    // Add hover effect
                    wordElement.addEventListener('mouseenter', () => {
                        wordElement.style.backgroundColor = '#5a6fd8';
                        wordElement.style.transform = 'translateY(-2px)';
                    });

                    wordElement.addEventListener('mouseleave', () => {
                        if (wordElement.style.pointerEvents !== 'none') {
                            wordElement.style.backgroundColor = '#667eea';
                            wordElement.style.transform = 'translateY(0)';
                        }
                    });

                    wordElement.addEventListener('click', () => this.selectWord(word, wordElement));
                    wordBank.appendChild(wordElement);
                });
            }

            selectWord(word, element) {
                this.selectedWords.push(word);
                element.style.backgroundColor = '#51cf66';
                element.style.borderColor = '#51cf66';
                element.style.color = 'white';
                element.style.opacity = '0.7';
                element.style.transform = 'scale(0.95)';
                element.style.pointerEvents = 'none';

                // Show in answer area
                const answerArea = document.getElementById('answer-area');
                const selectedElement = document.createElement('span');
                selectedElement.textContent = word + ' ';
                selectedElement.style.cssText = `
                    display: inline-block;
                    margin: 2px;
                    padding: 4px 8px;
                    background: #51cf66;
                    color: white;
                    border-radius: 4px;
                `;
                answerArea.appendChild(selectedElement);
            }

            clearAnswer() {
                this.selectedWords = [];
                document.getElementById('answer-area').innerHTML = '';

                // Reset word options
                const sentence = this.currentSentences[this.currentIndex];
                this.showWordOptions(sentence.wordOptions);
            }

            checkAnswer() {
                const sentence = this.currentSentences[this.currentIndex];
                const isCorrect = this.arraysEqual(this.selectedWords, sentence.correctFrench);

                this.totalCount++;

                if (isCorrect) {
                    this.score += 10;
                    this.streak++;
                    this.correctCount++;
                    document.getElementById('feedback').innerHTML = '🎉 Correct! Well done!';
                    document.getElementById('feedback').style.color = '#51cf66';

                    // Auto-play pronunciation on correct answer
                    setTimeout(() => {
                        this.playPronunciation(sentence.correctFrench.join(' '));
                    }, 500); // Small delay so user hears success sound first
                } else {
                    this.streak = 0;
                    document.getElementById('feedback').innerHTML = '❌ Not quite right. Try again!';
                    document.getElementById('feedback').style.color = '#ff6b6b';
                }

                document.getElementById('explanation').textContent = sentence.explanation;
                document.getElementById('next-btn').style.display = 'inline-block';

                this.updateStats();
            }

            nextQuestion() {
                this.currentIndex++;
                this.showQuestion();
            }

            showHint() {
                const sentence = this.currentSentences[this.currentIndex];
                if (sentence.correctFrench.length > 0) {
                    const firstWord = sentence.correctFrench[0];
                    document.getElementById('feedback').innerHTML = `💡 Hint: Start with "${firstWord}"`;
                    document.getElementById('feedback').style.color = '#ffc107';
                }
            }

            playPronunciation(text) {
                if ('speechSynthesis' in window) {
                    // Stop any current speech
                    speechSynthesis.cancel();

                    const utterance = new SpeechSynthesisUtterance(text);
                    utterance.lang = 'fr-FR';
                    utterance.rate = 0.7; // Slightly slower for learning
                    utterance.pitch = 1.0;
                    utterance.volume = 1.0;

                    // Try to use a French voice if available
                    const voices = speechSynthesis.getVoices();
                    const frenchVoice = voices.find(voice =>
                        voice.lang.includes('fr') || voice.name.includes('French')
                    );
                    if (frenchVoice) {
                        utterance.voice = frenchVoice;
                    }

                    speechSynthesis.speak(utterance);
                    console.log(`🔊 Playing pronunciation: ${text}`);
                } else {
                    console.log('❌ Speech synthesis not supported');
                }
            }

            replayAudio() {
                const sentence = this.currentSentences[this.currentIndex];
                if (sentence && sentence.correctFrench) {
                    this.playPronunciation(sentence.correctFrench.join(' '));
                } else {
                    console.log('❌ No sentence to replay');
                }
            }

            updateStats() {
                document.getElementById('score').textContent = this.score;
                document.getElementById('streak').textContent = this.streak;
                document.getElementById('correct-count').textContent = this.correctCount;
                document.getElementById('total-count').textContent = this.totalCount;

                const accuracy = this.totalCount > 0 ? Math.round((this.correctCount / this.totalCount) * 100) : 0;
                document.getElementById('accuracy').textContent = `${accuracy}%`;
            }

            arraysEqual(a, b) {
                return a.length === b.length && a.every((val, i) => val === b[i]);
            }
        }

        // Initialize game when page loads
        document.addEventListener('DOMContentLoaded', () => {
            console.log('🎯 Simple Wordie Budie game starting...');
            new SimpleGame();
        });
    </script>
</body>
</html>